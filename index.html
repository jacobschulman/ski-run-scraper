<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ski Run Scraper - Daily Grooming & Snow Reports</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
            line-height: 1.6;
            color: #333;
        }
        h1 {
            color: #2c5aa0;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        h2 {
            color: #3a7bd5;
            margin-top: 50px;
            font-size: 1.8em;
        }
        h3 {
            color: #2c5aa0;
            font-size: 1.4em;
            margin-top: 30px;
        }
        .subtitle {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 40px;
        }
        .region-section {
            margin-bottom: 50px;
        }
        .resort-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .resort-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.2s;
        }
        .resort-card:hover {
            border-color: #3a7bd5;
            box-shadow: 0 4px 12px rgba(42, 90, 160, 0.15);
        }
        .resort-card h4 {
            margin: 0 0 15px 0;
            color: #2c5aa0;
            font-size: 1.3em;
        }
        .resort-links {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .resort-link {
            flex: 1;
            min-width: 110px;
            background: linear-gradient(135deg, #2c5aa0 0%, #3a7bd5 100%);
            color: white;
            padding: 10px 15px;
            border-radius: 6px;
            text-align: center;
            text-decoration: none;
            font-size: 0.9em;
            font-weight: 500;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .resort-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(42, 90, 160, 0.3);
        }
        .resort-link.snow {
            background: linear-gradient(135deg, #4a90e2 0%, #67b8ff 100%);
        }
        .info-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin: 30px 0;
        }
        .info-section h3 {
            margin-top: 0;
            color: #2c5aa0;
        }
        .info-section ul {
            margin: 10px 0;
        }
        .info-section li {
            margin: 8px 0;
        }
        .links {
            display: flex;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .link-button {
            background: white;
            border: 2px solid #3a7bd5;
            color: #3a7bd5;
            padding: 12px 24px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
        }
        .link-button:hover {
            background: #3a7bd5;
            color: white;
        }
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
    </style>
</head>
<body>
    <h1>üéø Ski Run Scraper</h1>
    <p class="subtitle">Daily grooming, lift status, and snow report data for 39 ski resorts. Each resort scraped at 7 AM local time during its operating season.</p>

    <div class="info-section">
        <h3>‚ÑπÔ∏è How It Works</h3>
        <ul>
            <li><strong>Automatic Updates:</strong> GitHub Actions workflow runs every 3 hours and scrapes each resort once daily at 7 AM in the resort's local timezone</li>
            <li><strong>Smart Scheduling:</strong> Resorts are only scraped during their expected operating season (dates configured per resort)</li>
            <li><strong>Historical Data:</strong> All data is archived with daily timestamps and retained indefinitely</li>
            <li><strong>Dual Format:</strong> Data available as human-readable web pages AND a JSON API for developers</li>
        </ul>
    </div>

    <div id="resorts-container">
        <div class="loading">Loading resorts...</div>
    </div>

    <div class="info-section">
        <h3>üì° For Developers</h3>
        <p>Access the raw data via our JSON API, perfect for building your own apps, integrations, or IoT projects.</p>
        <div class="links">
            <a href="data/index.html" class="link-button">API Documentation</a>
            <a href="https://github.com/jacobschulman/ski-run-scraper" class="link-button">GitHub Repository</a>
        </div>
    </div>

    <script>
        // Region mappings
        const regions = {
            'Colorado': ['vail', 'beavercreek', 'breckenridge', 'keystone', 'crestedbutte'],
            'California/Nevada': ['heavenly', 'northstar', 'kirkwood'],
            'Pacific Northwest': ['stevenspass'],
            'Vermont': ['stowe', 'okemo', 'mountsnow'],
            'New York': ['hunter'],
            'New Hampshire': ['attitash', 'wildcat', 'mountsunapee', 'crotched'],
            'Pennsylvania': ['liberty', 'roundtop', 'whitetail', 'jackfrost', 'bigboulder', 'hiddenvalleypa', 'laurelmountain', 'sevensprings'],
            'Midwest': ['wilmot', 'aftonalps', 'mtbrighton', 'alpinevalley', 'bostonmills', 'brandywine', 'madrivermountain', 'hiddenvalley', 'snowcreek', 'paolipeaks'],
            'Utah': ['parkcity'],
            'Canada': ['whistlerblackcomb'],
            'Australia': ['perisher', 'fallscreek', 'hotham']
        };

        // Fetch and display resorts
        fetch('config.json')
            .then(response => response.json())
            .then(config => {
                const resorts = config.resorts;
                const container = document.getElementById('resorts-container');
                container.innerHTML = '';

                // Group resorts by region
                for (const [region, resortKeys] of Object.entries(regions)) {
                    const regionResorts = resorts.filter(r => resortKeys.includes(r.key));
                    if (regionResorts.length === 0) continue;

                    const section = document.createElement('div');
                    section.className = 'region-section';

                    const heading = document.createElement('h2');
                    heading.textContent = region;
                    section.appendChild(heading);

                    const grid = document.createElement('div');
                    grid.className = 'resort-grid';

                    regionResorts.forEach(resort => {
                        const card = document.createElement('div');
                        card.className = 'resort-card';

                        const name = document.createElement('h4');
                        name.textContent = resort.name;
                        card.appendChild(name);

                        const links = document.createElement('div');
                        links.className = 'resort-links';

                        // Grooming link (all resorts have terrain data)
                        const groomingLink = document.createElement('a');
                        groomingLink.href = `data/${resort.key}/grooming.html`;
                        groomingLink.className = 'resort-link';
                        groomingLink.textContent = '‚õ∑Ô∏è Grooming';
                        links.appendChild(groomingLink);

                        // Snow report link (if available)
                        if (resort.snowReportUrl) {
                            const snowLink = document.createElement('a');
                            snowLink.href = `data/${resort.key}/snow.html`;
                            snowLink.className = 'resort-link snow';
                            snowLink.textContent = '‚ùÑÔ∏è Snow';
                            links.appendChild(snowLink);
                        }

                        card.appendChild(links);
                        grid.appendChild(card);
                    });

                    section.appendChild(grid);
                    container.appendChild(section);
                }
            })
            .catch(error => {
                console.error('Error loading resorts:', error);
                document.getElementById('resorts-container').innerHTML =
                    '<div class="loading">Error loading resorts. Please try again later.</div>';
            });
    </script>
</body>
</html>
